/* 自定义字体定义 */
@font-face {
  font-family: 'TCloudNumber';
  src:
    url('./fonts/TCloudNumberVF.ttf') format('truetype-variations'),
    url('./fonts/TCloudNumberVF.ttf') format('truetype');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

html,
body,
#app {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Misans', sans-serif;
  overflow: hidden;
}

:where(*) {
  -webkit-user-select: none;
  user-select: none;
}

:where(input, textarea, [contenteditable], .t-input__inner, .t-textarea__inner, .t-select__input) {
  -webkit-user-select: text;
  user-select: text;
}

/* 自定义滚动条（亮/暗主题适配） */
/* 统一变量 */
:root[theme-mode='light'] {
  --ea-scrollbar-thumb: rgba(0, 0, 0, 0.26);
  --ea-scrollbar-thumb-hover: rgba(0, 0, 0, 0.36);
}

:root[theme-mode='dark'] {
  --ea-scrollbar-thumb: rgba(255, 255, 255, 0.18);
  --ea-scrollbar-thumb-hover: rgba(255, 255, 255, 0.28);
}

/* WebKit 浏览器 */
*::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background-color: var(--ea-scrollbar-thumb);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
  background-color: var(--ea-scrollbar-thumb-hover);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--ea-scrollbar-thumb-hover) transparent;
}

.root {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: var(--td-bg-color-page);
  color: var(--td-text-color-primary);
}

.code-layout-title-bar {
  /* display: flex;
  align-items: center; */
  /* 避免被收缩 */
  flex-shrink: 0;
  /* 高度与 main.js 中 titleBarOverlay.height 一致  */
  height: 35px;
  width: 100%;
  /* 标题栏始终在最顶层（避免后续被 Modal 之类的覆盖） */
  /* z-index: 9999; */
  /* padding-left: 4px; */
  /* font-size: 14px; */
  /* 整个标题栏默认可拖动 */
  -webkit-app-region: drag;
}

/* 左侧和右侧区域设置为不可拖动 */
.code-layout-title-bar > div:first-child,
.code-layout-title-bar > div:last-child {
  -webkit-app-region: no-drag;
}

/* 确保左侧和右侧区域的所有子元素都不可拖动 */
.code-layout-title-bar > div:first-child *,
.code-layout-title-bar > div:last-child * {
  -webkit-app-region: no-drag;
}

/* 中心区域保持可拖动（继承父级设置） */
.code-layout-title-bar > div:nth-child(2) {
  -webkit-app-region: drag;
}

/* 额外确保菜单栏区域不可拖动 */
.code-layout-title-bar .code-layout-menu-bar,
.code-layout-title-bar [class*='menu'],
.code-layout-title-bar [class*='Menu'] {
  -webkit-app-region: no-drag;
}

/*
.content {
  overflow: auto;
}
*/

.ea_app,
.mainpage {
  width: 100%;
  height: 100%;
  background: var(--td-bg-color-page) !important;
}

/* macOS main window: glass-compatible transparency */
.is-mac-main html,
.is-mac-main body,
.is-mac-main #app,
.is-mac-main .root,
.is-mac-main .ea_app,
.is-mac-main .mainpage {
  background: transparent !important;
}

/* macOS main window: flatten layout shell and sider/content backgrounds */
.is-mac-main .mainpage-layout,
.is-mac-main .mainpage-layout.t-layout,
.is-mac-main .mainpage-layout .t-layout__sider,
.is-mac-main .mainpage-layout .t-layout__content {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
}

[data-tray-popover] .ea_app,
[data-tray-popover] .mainpage {
  background: color-mix(in srgb, var(--td-bg-color-page) 40%, transparent) !important;
}

h1,
h2,
p {
  user-select: none;
}

.t-layout__sider {
  width: auto !important;
}
.t-default-menu .t-menu__logo:not(:empty) {
  border-bottom-color: transparent !important;
  bottom: 15px !important;
}
.t-default-menu__inner {
  padding-top: 50% !important;
  padding-bottom: 8% !important;
  height: calc(100vh - 50px) !important;
}
.t-menu__item {
  padding-top: 20px !important;
  padding-bottom: 20px !important;

  margin: 3px !important;

  margin-bottom: 10px !important;
}
.flex-box {
  flex-flow: 1;
}

.t-menu--scroll {
  height: auto !important;
  /* flex: none !important; */
}

.t-menu__operations {
  padding: 8px !important;
  position: relative !important;
  bottom: 50px !important;
  left: 0px !important;
}
.t-default-menu .t-menu__operations:not(:empty) {
  border-top-color: transparent !important;
}
.t-menu__operations .t-menu__item {
  padding-left: 11px !important;
}

/* 使.code-layout-split-base .split-n-container>.content 内容区在垂直方向溢出时自动滚动 */
.content {
  overflow-y: auto !important;
}

/* 将 vue-code-layout 的主题变量映射到 TDesign 设计令牌，使其随主题自动切换 */
:root {
  /* 基础背景与层次 */
  --code-layout-color-background: var(--td-bg-color-page);
  --code-layout-color-background-second: var(--td-bg-color-secondarycontainer);
  --code-layout-color-background-light: var(--td-bg-color-component);
  --code-layout-color-background-hover: var(--td-bg-color-component-hover);
  --code-layout-color-background-hover-light: var(--td-bg-color-secondarycontainer-hover);
  --code-layout-color-background-highlight: color-mix(
    in srgb,
    var(--td-brand-color-7, var(--td-brand-color, #0052d9)) 18%,
    transparent
  );
  --code-layout-color-background-mask-light: color-mix(
    in srgb,
    var(--td-text-color-primary) 20%,
    transparent
  );

  /* 品牌/高亮 */
  --code-layout-color-highlight: var(--td-brand-color, var(--td-brand-color-7));

  /* 文字颜色 */
  --code-layout-color-text: var(--td-text-color-primary);
  --code-layout-color-text-light: var(--td-text-color-primary);
  --code-layout-color-text-highlight: var(--td-brand-color, var(--td-brand-color-7));
  --code-layout-color-text-gray: var(--td-text-color-secondary);
  --code-layout-color-text-disabled: var(--td-text-color-disabled);

  /* 边框与阴影 */
  --code-layout-color-border: var(--td-border-level-1-color);
  --code-layout-color-border-light: var(--td-border-level-1-color);
  --code-layout-color-border-background: var(--td-bg-color-secondarycontainer);
  --code-layout-color-border-white: var(--td-text-color-anti);
  --code-layout-color-shadow: var(--td-table-shadow-color, rgba(0, 0, 0, 0.08));

  /* 滚动条 */
  --code-layout-color-scrollbar-thumb: var(--td-scrollbar-color, var(--ea-scrollbar-thumb));
  --code-layout-color-scrollbar-thumb-light: var(
    --td-scrollbar-color,
    var(--ea-scrollbar-thumb-hover)
  );

  /* 尺寸（沿用库默认约定，必要时可对齐 TDesign 半径/字号） */
  /* --code-layout-border-size: 1px; */
  /* --code-layout-border-size-larger: 2px; */
  /* --code-layout-border-size-dragger: 4px; */
  /* --code-layout-border-radius-small: var(--td-radius-small, 4px); */
  /* --code-layout-border-radius-large: var(--td-radius-default, 6px); */
  /* --code-layout-header-height: 22px; */
  --code-layout-titlebar-background: var(--td-bg-color-container);
  /* --code-layout-titlebar-height: 35px; */
  /* --code-layout-status-height: 20px; */
  /* --code-layout-font-size: 13px; */
  /* --code-layout-font-size-small: 11px; */
}

/* SplitLayout Tab 变量使用与 TDesign 统一的配色体系 */
.code-layout-split-tab {
  /* 高度/字号沿用库默认，如需统一可放开注释
  --tab-height: 35px;
  --tab-font-size: 12px;
  --tab-icon-size: 14px;
  */
  --tab-text-color: var(--code-layout-color-text);
  --tab-active-text-color: var(--code-layout-color-text);
  --tab-mormal-color: var(--code-layout-color-background-light);
  --tab-active-color: var(--td-bg-color-container);
  --tab-border-color: var(--code-layout-color-border);
  --tab-button-normal-color: transparent;
  --tab-button-hover-color: var(--td-bg-color-component-hover);
  /* --tab-close-size: 18px; */
}
